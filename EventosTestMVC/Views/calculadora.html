<!DOCTYPE html>
<html lang="en">
<head>
    <!-- ... (Tus encabezados) ... -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="css/style.css" rel="stylesheet" type="text/css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <title>Calculator</title>
    <link rel="shortcut icon" href="img/logo.png" type="image/png">
    
    
    
    <script>
        

        // Function to calculate the total weight
        function calcularPeso() {
            var cantidadPersonas = parseFloat(document.getElementById('cantidadPersonas').value);

            var nombreViver = document.getElementById('nombreViver').value;
            var seleccion = parseFloat(document.getElementById('seleccion').value);
            var pesoTotalGramos = cantidadPersonas * seleccion;

        
            document.getElementById('pesoGramos').value = pesoTotalGramos + ' gramos';

            if (seleccion <= 1000) {
                var pesoTotalKilogramos = pesoTotalGramos / 1000;
                document.getElementById('resultadoKilogramos').value = pesoTotalKilogramos.toFixed(2) + ' kg';
            } else {
                document.getElementById('resultadoKilogramos').value = pesoTotalGramos.toFixed(2) + ' kg';
            }

            // Save the data to localStorage
            saveDataToLocalStorage(nombreViver, seleccion, pesoTotalGramos, pesoTotalKilogramos);
        }

        // Function to save data to localStorage
        function saveDataToLocalStorage(nombreViver, seleccion, pesoGramos, resultadoKilogramos) {
            var data = {
                'NombreViver': nombreViver,
                'Seleccion': seleccion,
                'PesoGramos': pesoGramos,
                'ResultadoKilogramos': resultadoKilogramos
            };

            // Retrieve existing data from localStorage
            var existingData = JSON.parse(localStorage.getItem('viveresData')) || [];

            // Add the new data to the array
            existingData.push(data);

            // Save the updated array back to localStorage
            localStorage.setItem('viveresData', JSON.stringify(existingData));

            // Display the saved data
            displaySavedData();
        }

        // Function to display saved data
        function displaySavedData() {
            var savedDataContainer = document.getElementById('savedDataContainer');
            savedDataContainer.innerHTML = '';

            // Retrieve data from localStorage
            var data = JSON.parse(localStorage.getItem('viveresData'));

            // Display the data
            if (data && data.length > 0) {
                var ul = document.createElement('ul');
                data.forEach(function (item) {
                    var li = document.createElement('li');
                    li.textContent = `${item.NombreViver} (${item.Seleccion}) ${item.ResultadoKilogramos} Kg / ${item.PesoGramos} Gramos`;
                    ul.appendChild(li);
                });
                savedDataContainer.appendChild(ul);
            }
        }

        // Call displaySavedData on page load
        window.onload = function () {
            displaySavedData();
        };



             //borra la lista
             function borrarLista() {
var savedDataContainer = document.getElementById('savedDataContainer');
// Remove all child elements from the container
    while (savedDataContainer.firstChild) {
        savedDataContainer.removeChild(savedDataContainer.firstChild);
    }
// Clear localStorage 
localStorage.clear();
}
    </script>
</head>
<body>

         <!-- nav -->
<div class="collapse" id="navbarToggleExternalContent">
    <div class="bg-light p-4 ">
        <h5 class="h4">Presupuesto</h5>
        <a href="gastosfacturas.html" id="menulink"><span class="text-muted">Gastos y facturas</span></a>
        <br>
        <a href="" id="menulink"><span class="text-muted">Calculadora</span></a>
    </div>

    <div class="bg-light p-4">
        <h5 class="h4">Listas</h5>
        <a href="listas.html" id="menulink"><span class="text-muted">Compras</span></a>
        <br>
        <a href="listas.html" id="menulink"><span class="text-muted">Tareas</span></a>
    </div>

    <div class="bg-light p-4">
        <a href="mesas.html" id="menulink"><h5 class="h4">Mesas</h5></a>
    </div>
</div>

<nav class="navbar navbar-light bg-light" style="padding:20px;">
    <div class="container-fluid">
        <button class="navbar-toggler collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#navbarToggleExternalContent" aria-controls="navbarToggleExternalContent" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <button id="logout">LOG OUT</button>
    </div>
</nav>







<div class="container" style="margin-top: 60px;">
    <div class="row">
        <div class="col-md-6" style="margin-bottom: 50px;">
            <h3 class="text-center" style="margin-top: 20px;">Calculadora</h3>
            <hr />
            <p class="text-muted text-center" style="font-size: 15px;">
                Podras agregar los viveres que necesitas para tu vento y calcular en base al consumo por persona la cantidad total que necesitas comprar </p>
            <hr/>
         
            <div class="row">

                    <form>
                        <div class="input-group mb-3">
                            <span class="input-group-text" id="basic-addon1"><img src="img/cp.png" style="height: 25px; width: 25px; max-width: fit-content;"></span>
                            <input  class="form-control" type="number" id="cantidadPersonas" placeholder="Cantidad de Personas" aria-label="Username" aria-describedby="basic-addon1">
                          </div>

                    <!--button type="button" onclick="agregarInput()">+</button-->
                    <div class="input-group mb-3">
                        <span class="input-group-text" id="basic-addon1"><img src="img/viver.png" style="height: 30px; width: 30px; max-width: fit-content;"></span>
                        <input  class="form-control" type="text" id="nombreViver" placeholder="Nombre de Viver" aria-label="Username" aria-describedby="basic-addon1">
                      </div>

                    <div class="mb-3">                       
                            <select class="form-select"  id="seleccion" aria-label="Default select example">
                                <option selected>Porcion por persona</option>
                                <option value="100">100 gramos</option>
                                <option value="200">200 gramos</option>
                                <option value="300">300 gramos</option>
                                <option value="400">400 gramos</option>
                                <option value="500">500 gramos</option>
                                <option value="600">600 gramos</option>
                                <option value="700">700 gramos</option>
                                <option value="800">800 gramos</option>
                                <option value="900">900 gramos</option>
                                <option value="1000">1 kg</option>
                                <option value="2000">2 kg</option>
                                <option value="3000">3 kg</option>
                                <option value="4000">4 kg</option>
                            </select>
                        </div>
                    </div>

                    <div class="d-grid gap-2 mb-3">
                    <button type="button" name="submit" style="border-radius: 100px; margin-bottom: 10px; margin-top: 10px;" class="subir btn" onClick="calcularPeso()">CALCULAR</button>
                    </div>

                    <div class="input-group mb-3">
                        <input type="text" class="form-control" id="pesoGramos" placeholder="Gramos" aria-label="Username"readonly>
        
                        <input type="text" class="form-control" id="resultadoKilogramos" placeholder="Kilogramos" aria-label="Server"readonly>
                      </div>
                </form>  
            </main>
        </div>


        <div class="col-md-6 top-0 bottom-0 end-0" style="margin-top: 15px;">
            <main class="container">
               
           <h2 class="text-center">Lista</h2>
           <hr/>
           <button type="button" onclick="borrarLista()" style="background-color: #4911F7; color: white; font-weight: 600; border-radius: 35rem; padding: 5px;   padding-inline-start: 10px; box-shadow: 5px 5px 10px rgba(0, 0, 0, 0.2);
        padding-inline-end: 10px;">Borrar Lista</button>
        <hr/>
  
        <div id="savedDataContainer"></div>
        <div id="displaySavedData"></div>
        

    </div>
</div>


</body>
</html>

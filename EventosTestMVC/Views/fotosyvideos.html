<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <link href="css/style.css" rel="stylesheet" type="text/css" />

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="shortcut icon" href="img/logo.png" type="image/png">

    <title>Images</title>
</head>
<body>


    
 <!--nav-->
<!--nav-->


    
    
        <nav class="navbar navbar-light bg-light"style="padding:20px;">
          <div class="container-fluid justify-content-md-end ">
            <button id="logout" >LOG OUT</button>
          </div>
        </nav>


      <!--div class="container" style="padding: 30px;">
    <h1>Subir Archivo a Google Drive</h1>
    <form enctype="multipart/form-data">
        <label for="archivo">Selecciona un archivo:</label>
        <input type="file" id="archivo" name="archivo" >
        <button type="button" id="subirArchivo" class="subir">Subir archivo</button>
    </form>
</div>  


    <script>
        // Reemplaza con tus propias credenciales
        const CLIENT_ID = '751729567527-r48avo4bhdjl6pdo83ocn9m6ll54c7hf.apps.googleusercontent.com';
        const API_KEY = 'AIzaSyDhrsqUoJSfFivmyE_I0y9p_pHUBqgUuEw';

        // ID de la carpeta de Google Drive donde deseas cargar el archivo
        const FOLDER_ID = 'https://drive.google.com/drive/folders/1zs2h9hF7Iw1tLE-ccSGYql1yQ7n2R_HI?usp=drive_link';

        // Función para cargar un archivo en Google Drive
        function subirArchivo() {
            gapi.load('client:auth2', initClient);
        }

        function initClient() {
            gapi.client.init({
                apiKey: API_KEY,
                clientId: CLIENT_ID,
                discoveryDocs: ["https://www.googleapis.com/discovery/v1/apis/drive/v3/rest"],
                scope: 'https://www.googleapis.com/auth/drive.file'
            }).then(() => {
                gapi.auth2.getAuthInstance().signIn().then(() => {
                    const fileInput = document.getElementById('archivo');
                    const file = fileInput.files[0];

                    if (file) {
                        const metadata = {
                            name: file.name,
                            parents: [FOLDER_ID]
                        };

                        const form = new FormData();
                        form.append('metadata', new Blob([JSON.stringify(metadata)], { type: 'application/json' }));
                        form.append('file', file);

                        gapi.client.drive.files.create({
                            resource: metadata,
                            media: form
                        }).then(response => {
                            console.log('Archivo subido con éxito:', response.result);
                            alert('Archivo subido con éxito');
                        }).catch(error => {
                            console.error('Error al subir el archivo:', error);
                            alert('Error al subir el archivo');
                        });
                    }
                });
            });
        }

        // Carga la API de Google
        gapi.load('client:auth2', () => gapi.client.load('drive', 'v3', subirArchivo));
    </script>

    <script async defer src="https://apis.google.com/js/api.js"></script-->










    <style>
        #preview {
            max-width: 100%;
            max-height: 300px;
            margin-top: 20px;
        }
    </style>
</head>

<body>
       <div class="container text-center" style="margin-top: 40px;">
    <h2>Subir Archivos</h2>
    
    <form id="uploadForm" enctype="multipart/form-data">
        <input type="file" id="fileInput" accept="image/*" onchange="previewImage()" required>
    </br>
        <button class="subir" style="margin-top: 30px;" type="button" onclick="uploadImage()">Subir Imagen</button>
    </form>

    <div id="previewContainer" style="margin-top: 50px;">
        <h3>Fotos y videos subidos:</h3>
        <img id="preview" alt="">
    </div>

    <script>
        function previewImage() {
            const fileInput = document.getElementById('fileInput');
            const preview = document.getElementById('preview');
            const previewContainer = document.getElementById('previewContainer');

            const file = fileInput.files[0];

            if (file) {
                const reader = new FileReader();

                reader.onload = function (e) {
                    preview.src = e.target.result;
                    previewContainer.style.display = 'block';
                };

                reader.readAsDataURL(file);
            } else {
                preview.src = '';
                previewContainer.style.display = 'none';
            }
        }

        function uploadImage() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];

            if (file) {
                // Aquí puedes enviar la imagen al servidor usando AJAX o realizar otras operaciones según tus necesidades.
                // Por ejemplo, puedes usar la API Fetch para enviar la imagen a un servidor.
                // Aquí se muestra solo un mensaje de alerta como ejemplo.
                alert('Imagen subida con éxito');
            } else {
                alert('Por favor, seleccione una imagen antes de intentar subir');
            }
        }
    </script>
</body>
</html>

</body>
</html>


